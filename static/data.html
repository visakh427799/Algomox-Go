<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
   <link href="/static/style.css" rel="stylesheet">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

   <style>
       body{
  background-color: rgb(243, 240, 240);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

}
h1{
    color: rgb(20, 7, 77);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin-left: 50px;
}

p{
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

 .box_table{
    width:500px;
  
    margin: auto;
}


   </style>
</head>
<body>
    <div class="navbar">
     <h1>Air <span style="color:orangered;">go</span></h1>
     <a href="/" style="color:orangered;margin-right: 100px;text-decoration: none;">Back</a>

    </div>
    <div class="box">
        
        
        <div class="box_table">

        
            
          {{if .}}
     <h6 class="text-center">Airport Name:  <span style="color:rgb(253, 61, 2)">{{(index . 0).Airport.Name }}</span></h6>

            
<div class="pt-2">
              <table class="table table-dark table-striped ">
                <thead class="table-dark">
                    <td class="text-center"> Total Flights</td>
                    <td class="text-center"> Total Minutes Delayed</td>
                    <td class="text-center">Time Label</td>
                </thead>
                <tbody>
                    {{range .}}

                     <tr>
                      <td class="text-center">{{.Statistics.Flights.Total}}</td>
                      <td class="text-center">{{.Statistics.Flights.Delayed}}</td>
                      <td class="text-center">{{.Time.Label}}</td>

                     </tr>


                     {{end}}
                </tbody>
              </table>
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <li class="page-item"><a class="page-link" onclick="prev()" >Previous</a></li>
                  <li class="page-item"><a class="page-link" onclick="pg(1)">1</a></li>
                  <li class="page-item"><a class="page-link" onclick="pg(2)">2</a></li>
                  <li class="page-item"><a class="page-link" onclick="pg(3)">3</a></li>
                  <li class="page-item"><a class="page-link" onclick="next()">Next</a></li>
                </ul>
              </nav> 
              <script>
                  const currentPage=()=>{
                  const queryString = window.location.search;
                  console.log(queryString);
                  const urlParams = new URLSearchParams(queryString);
                  let code=urlParams.get('code')
                  let filename=urlParams.get('filename')
                  let page=urlParams.get('pagenum')
                  return {code,filename,page}
                }


                const pg=(pagenumber)=>{
                    var obj=currentPage()
                    var code=obj.code;
                    var filename=obj.filename;
                    console.log(obj)
                    
                location.href=`/readAirport?code=${code}&filename=${filename}&pagenum=${pagenumber}`
                    
                }
                  const next=()=>{
                    var obj=currentPage()
                    var code=obj.code;
                    var filename=obj.filename;
                    var pagenumber=obj.page;
                    pagenumber=Number(pagenumber)+1
                    location.href=`/readAirport?code=${code}&filename=${filename}&pagenum=${pagenumber}`
                    
                 }
                 const prev=()=>{
                    var obj=currentPage()
                    var code=obj.code;
                    var filename=obj.filename;
                    var pagenumber=obj.page;
                    pagenumber=Number(pagenumber)-1
                    location.href=`/readAirport?code=${code}&filename=${filename}&pagenum=${pagenumber}`
                     
                   }
              </script>

            </div>
            {{else}}
            <h5 class="text-center"><span style="color:rgb(253, 61, 2)">No data found check you file name or airport code...!!!</span></h5>

              {{end}}
        </dv>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

</html>